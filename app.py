import streamlit as st
from PIL import Image, ImageDraw
import numpy as np
import io, imageio

# ---------------------------------------------------
# FAST LED FLASHING BOARD (4 SCENES, NO FREEZE)
# ---------------------------------------------------
st.set_page_config(page_title="LED Flashing Board", layout="wide")

# ---------- CONFIG ----------
LED_ON = (249, 237, 50)
LED_OFF = (59, 60, 61)
BG_COLOR = (20, 20, 20)

DOT_W, DOT_H = 5, 7
DOT_SIZE = 12
GAP = 5
PAD = 15

ROWS = 4
COLS = 10

# ---------- FONT MAP ----------
def mk(rows): return rows
font = {
    " ": mk(["00000","00000","00000","00000","00000","00000","00000"]),
    "A": mk(["01110","10001","11111","10001","10001","10001","10001"]),
    "B": mk(["11110","10001","11110","10001","10001","10001","11110"]),
    "C": mk(["01110","10001","10000","10000","10000","10001","01110"]),
    "D": mk(["11110","10001","10001","10001","10001","10001","11110"]),
    "E": mk(["11111","10000","11110","10000","10000","10000","11111"]),
    "F": mk(["11111","10000","11110","10000","10000","10000","10000"]),
    "G": mk(["01110","10001","10000","10111","10001","10001","01110"]),
    "H": mk(["10001","10001","11111","10001","10001","10001","10001"]),
    "I": mk(["01110","00100","00100","00100","00100","00100","01110"]),
    "J": mk(["00001","00001","00001","10001","10001","10001","01110"]),
    "K": mk(["10001","10010","11100","10100","10010","10001","10001"]),
    "L": mk(["10000","10000","10000","10000","10000","10000","11111"]),
    "M": mk(["10001","11011","10101","10101","10001","10001","10001"]),
    "N": mk(["10001","11001","10101","10011","10001","10001","10001"]),
    "O": mk(["01110","10001","10001","10001","10001","10001","01110"]),
    "P": mk(["11110","10001","11110","10000","10000","10000","10000"]),
    "Q": mk(["01110","10001","10001","10001","10101","10010","01101"]),
    "R": mk(["11110","10001","11110","10100","10010","10001","10001"]),
    "S": mk(["01111","10000","10000","01110","00001","00001","11110"]),
    "T": mk(["11111","00100","00100","00100","00100","00100","00100"]),
    "U": mk(["10001","10001","10001","10001","10001","10001","01110"]),
    "V": mk(["10001","10001","10001","01010","01010","00100","00100"]),
    "W": mk(["10001","10001","10101","10101","10101","11011","10001"]),
    "X": mk(["10001","01010","00100","00100","00100","01010","10001"]),
    "Y": mk(["10001","01010","00100","00100","00100","00100","00100"]),
    "Z": mk(["11111","00001","00010","00100","01000","10000","11111"]),
    "0": mk(["01110","10001","10011","10101","11001","10001","01110"]),
    "1": mk(["00100","01100","00100","00100","00100","00100","01110"]),
    "2": mk(["01110","10001","00001","00110","01000","10000","11111"]),
    "3": mk(["11110","00001","01110","00001","00001","00001","11110"]),
    "4": mk(["00010","00110","01010","10010","11111","00010","00010"]),
    "5": mk(["11111","10000","11110","00001","00001","10001","01110"]),
    "6": mk(["01110","10000","11110","10001","10001","10001","01110"]),
    "7": mk(["11111","00001","00010","00100","01000","01000","01000"]),
    "8": mk(["01110","10001","01110","10001","10001","10001","01110"]),
    "9": mk(["01110","10001","10001","01111","00001","00001","01110"]),
}

# ---------- DRAW LED CHAR ----------
def draw_char(draw, ch, x, y):
    pattern = font.get(ch.upper(), font[" "])
